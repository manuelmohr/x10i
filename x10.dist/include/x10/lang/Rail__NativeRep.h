#ifndef __X10_LANG_RAIL__NATIVEREP_H
#define __X10_LANG_RAIL__NATIVEREP_H

#include <x10rt.h>


#define X10_LANG_OBJECT_H_NODEPS
#include <x10/lang/Object.h>
#undef X10_LANG_OBJECT_H_NODEPS
namespace x10 { namespace lang { 
class Boolean;
} } 
#include <x10/lang/Boolean.struct_h>
namespace x10 { namespace compiler { 
class Native;
} } 
namespace x10 { namespace lang { 
class Place;
} } 
#include <x10/lang/Place.struct_h>
namespace x10 { namespace lang { 
class Runtime;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
class Int;
} } 
#include <x10/lang/Int.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
class VoidFun_0_0;
} } 
namespace x10 { namespace lang { 
class ValRail__NativeRep;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(Z1), class FMGL(U)> class Fun_0_1;
} } 
namespace x10 { namespace lang { 
class ClassCastException;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(Z1), class FMGL(U)> class Fun_0_1;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class ValRail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class PlaceLocalHandle;
} } 
#include <x10/lang/PlaceLocalHandle.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class PlaceLocalHandle;
} } 
#include <x10/lang/PlaceLocalHandle.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace util { 
template<class FMGL(T), class FMGL(U)> class Pair;
} } 
#include <x10/util/Pair.struct_h>
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(Z1), class FMGL(U)> class Fun_0_1;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(T)> class Rail;
} } 
namespace x10 { namespace lang { 
template<class FMGL(Z1), class FMGL(U)> class Fun_0_1;
} } 
namespace x10 { namespace lang { 
template<class FMGL(U)> class Fun_0_0;
} } 
namespace x10 { namespace lang { 
class Throwable;
} } 
namespace x10 { namespace lang { 

class Rail__NativeRep : public x10::lang::Object   {
    public:
    RTT_H_DECLS_CLASS
    
    void _instance_init();
    
    static x10_boolean isCPP();
    static x10_boolean isJava();
    static x10_boolean useNativeFor(x10::lang::Place x);
    template<class FMGL(T)> static void localCopyTo(x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
                                                    x10_int src_off,
                                                    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
                                                    x10_int dst_off,
                                                    x10_int len);
    template<class FMGL(T)> static void copyTo(x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
                                               x10_int src_off,
                                               x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
                                               x10_int dst_off,
                                               x10_int len);
    template<class FMGL(T)> static void localCopyFrom(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10_int len);
    template<class FMGL(T)> static void copyFrom(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10_int len);
    template<class FMGL(T)> static void copyFrom(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10aux::ref<x10::lang::ValRail<FMGL(T) > > src,
      x10_int src_off,
      x10_int len);
    template<class FMGL(T)> static void copyTo(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10::lang::Place dst_place,
      x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder,
      x10_int len);
    template<class FMGL(T)> static void copyFrom(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10::lang::Place src_place,
      x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > src_finder,
      x10_int len);
    template<class FMGL(T)> static void copyFrom1(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10::lang::Place src_place,
      x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > src_finder,
      x10_int len);
    template<class FMGL(T)> static void copyTo(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
      x10_int dst_off,
      x10_int len,
      x10aux::ref<x10::lang::VoidFun_0_0> notifier);
    template<class FMGL(T)> static void copyTo(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10::lang::Place dst_place,
      x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder,
      x10_int len,
      x10aux::ref<x10::lang::VoidFun_0_0> notifier);
    template<class FMGL(T)> static void copyTo(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10::lang::Place dst_place,
      x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle,
      x10_int dst_off,
      x10_int len);
    template<class FMGL(T)> static void copyTo(
      x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
      x10_int src_off,
      x10::lang::Place dst,
      x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle,
      x10_int dst_off,
      x10_int len,
      x10aux::ref<x10::lang::VoidFun_0_0> notifier);
    template<class FMGL(T)> static x10aux::ref<x10::lang::Rail<FMGL(T) > >
      cudaMakeRail(
      x10::lang::Place dst,
      x10_int length);
    template<class FMGL(T)> static x10aux::ref<x10::lang::Rail<FMGL(T) > >
      makeRemoteRail(
      x10::lang::Place p,
      x10_int length,
      x10aux::ref<x10::lang::Fun_0_1<x10_int, FMGL(T)> > init);
    template<class FMGL(T)> static x10aux::ref<x10::lang::Rail<FMGL(T) > >
      makeRemoteRail(
      x10::lang::Place p,
      x10_int length,
      x10aux::ref<x10::lang::Rail<FMGL(T) > > init);
    void _constructor();
    
    static x10aux::ref<x10::lang::Rail__NativeRep> _make(
             );
    
    
    // Serialization
    public: static const x10aux::serialization_id_t _serialization_id;
    
    public: virtual x10aux::serialization_id_t _get_serialization_id() {
         return _serialization_id;
    }
    
    public: virtual void _serialize_body(x10aux::serialization_buffer& buf);
    
    public: template<class __T> static x10aux::ref<__T> _deserializer(x10aux::deserialization_buffer& buf);
    
    public: void _deserialize_body(x10aux::deserialization_buffer& buf);
    
};

} } 
#endif // X10_LANG_RAIL__NATIVEREP_H

namespace x10 { namespace lang { 
class Rail__NativeRep;
} } 

#ifndef X10_LANG_RAIL__NATIVEREP_H_NODEPS
#define X10_LANG_RAIL__NATIVEREP_H_NODEPS
#include <x10/lang/Object.h>
#include <x10/lang/Boolean.h>
#include <x10/compiler/Native.h>
#include <x10/lang/Place.h>
#include <x10/lang/Runtime.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Int.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/VoidFun_0_0.h>
#include <x10/lang/ValRail__NativeRep.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/ValRail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/util/Pair.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/ValRail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_1.h>
#include <x10/lang/ClassCastException.h>
#include <x10/lang/ValRail.h>
#include <x10/lang/Fun_0_1.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/util/Pair.h>
#include <x10/lang/ValRail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/PlaceLocalHandle.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/PlaceLocalHandle.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/util/Pair.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_1.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Rail.h>
#include <x10/lang/Fun_0_1.h>
#include <x10/lang/Fun_0_0.h>
#include <x10/lang/Throwable.h>
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__12_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__12_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/Fun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__12 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > >::template itable <x10_lang_Rail__NativeRep__closure__12<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    x10aux::ref<x10::lang::Rail<FMGL(T) > > apply() {
        
        //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return x10::lang::Rail<void>::make<FMGL(T) >(length);
        
    }
    
    // captured environment
    x10_int length;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->length);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10_int that_length = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__12<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__12<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__12<FMGL(T) >(that_length);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__12(x10_int length) : length(length) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:345";
    }

};

template<class FMGL(T)> typename x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > >::template itable <x10_lang_Rail__NativeRep__closure__12<FMGL(T) > >x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >, &x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__12<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__12_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__11_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__11_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/Fun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__11 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> >::template itable <x10_lang_Rail__NativeRep__closure__11<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> apply() {
        
        //#line 324 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return x10::util::Pair_methods<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int>::_make(x10::lang::PlaceLocalHandle_methods<x10aux::ref<x10::lang::Rail<FMGL(T) > > >::apply(dst_handle),
                                                                                                dst_off);
        
    }
    
    // captured environment
    x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->dst_handle);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > that_dst_handle = buf.read<x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__11<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__11<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__11<FMGL(T) >(that_dst_handle, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__11(x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle, x10_int dst_off) : dst_handle(dst_handle), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:324";
    }

};

template<class FMGL(T)> typename x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> >::template itable <x10_lang_Rail__NativeRep__closure__11<FMGL(T) > >x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >, &x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__11<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__11_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__10_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__10_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/Fun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__10 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> >::template itable <x10_lang_Rail__NativeRep__closure__10<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> apply() {
        
        //#line 316 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return x10::util::Pair_methods<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int>::_make(x10::lang::PlaceLocalHandle_methods<x10aux::ref<x10::lang::Rail<FMGL(T) > > >::apply(dst_handle),
                                                                                                dst_off);
        
    }
    
    // captured environment
    x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->dst_handle);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > that_dst_handle = buf.read<x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__10<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__10<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__10<FMGL(T) >(that_dst_handle, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__10(x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle, x10_int dst_off) : dst_handle(dst_handle), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:316";
    }

};

template<class FMGL(T)> typename x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> >::template itable <x10_lang_Rail__NativeRep__closure__10<FMGL(T) > >x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >, &x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__10<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__10_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__9_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__9_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__9 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__9<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 287 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> pair =
          (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(dst_finder))).operator->()))->*(x10aux::findITable<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(((x10aux::ref<x10::lang::Reference>)dst_finder)->_getITables())->apply))();
        
        //#line 288 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > dst = pair->FMGL(first);
        
        //#line 289 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10_int dst_off = pair->FMGL(second);
        
        //#line 291 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 291 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i = ((x10_int)0); ((i) < (len)); 
                                                  //#line 291 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                  i = ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 292 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
        //#line 294 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(notifier))).operator->()))->*(x10aux::findITable<x10::lang::VoidFun_0_0>(((x10aux::ref<x10::lang::Reference>)notifier)->_getITables())->apply))();
    }
    
    // captured environment
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder;
    x10_int len;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    x10aux::ref<x10::lang::VoidFun_0_0> notifier;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->dst_finder);
        buf.write(this->len);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
        buf.write(this->notifier);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > that_dst_finder = buf.read<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > >();
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10aux::ref<x10::lang::VoidFun_0_0> that_notifier = buf.read<x10aux::ref<x10::lang::VoidFun_0_0> >();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__9<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__9<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__9<FMGL(T) >(that_dst_finder, that_len, that_to_serialize, that_src_off, that_notifier);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__9(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder, x10_int len, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off, x10aux::ref<x10::lang::VoidFun_0_0> notifier) : dst_finder(dst_finder), len(len), to_serialize(to_serialize), src_off(src_off), notifier(notifier) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:286-295";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__9<FMGL(T) > >x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__9<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__9_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__8_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__8_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__8 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__8<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > dst2 = (__extension__ ({
            x10aux::ref<x10::lang::Rail<FMGL(T) > > __desugarer__var__45__ =
              dst;
            
            //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
            x10aux::ref<x10::lang::Rail<FMGL(T) > > __var869__;
            
            //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Labeled_c
            goto __ret1979; __ret1979: 
            //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Do_c
            do
            {
            {
                
                //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
                if ((!x10aux::struct_equals(__desugarer__var__45__,
                                            x10aux::null)) &&
                    !((x10aux::struct_equals(x10::lang::Place_methods::place((__desugarer__var__45__)->location),
                                             x10::lang::Place_methods::_make(x10aux::here)))))
                {
                    
                    //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Throw_c
                    x10aux::throwException(x10aux::nullCheck(x10::lang::ClassCastException::_make(x10::lang::String::Lit("x10.lang.Rail[T]{self.home==here}"))));
                }
                
                //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                __var869__ =
                  __desugarer__var__45__;
                
                //#line 253 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Branch_c
                goto __ret1979_end_;
            }
            goto __ret1979_next_; __ret1979_next_: ;
            }
            while (false);
            goto __ret1979_end_; __ret1979_end_: ;
            __var869__;
        }))
        ;
        
        //#line 255 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 255 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i = ((x10_int)0); ((i) < (len)); 
                                                  //#line 255 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                  i = ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 256 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst2)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
        //#line 258 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(notifier))).operator->()))->*(x10aux::findITable<x10::lang::VoidFun_0_0>(((x10aux::ref<x10::lang::Reference>)notifier)->_getITables())->apply))();
    }
    
    // captured environment
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10_int len;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    x10_int dst_off;
    x10aux::ref<x10::lang::VoidFun_0_0> notifier;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->dst);
        buf.write(this->len);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
        buf.write(this->dst_off);
        buf.write(this->notifier);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10::lang::VoidFun_0_0> that_notifier = buf.read<x10aux::ref<x10::lang::VoidFun_0_0> >();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__8<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__8<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__8<FMGL(T) >(that_dst, that_len, that_to_serialize, that_src_off, that_dst_off, that_notifier);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__8(x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10_int len, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off, x10_int dst_off, x10aux::ref<x10::lang::VoidFun_0_0> notifier) : dst(dst), len(len), to_serialize(to_serialize), src_off(src_off), dst_off(dst_off), notifier(notifier) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:252-259";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__8<FMGL(T) > >x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__8<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__8_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__7_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__7_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__7 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__7<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 218 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 218 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i = ((x10_int)0); ((i) < (len)); 
                                                  //#line 218 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                  i = ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 219 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
    }
    
    // captured environment
    x10_int len;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > src;
    x10_int src_off;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->len);
        buf.write(this->dst);
        buf.write(this->src);
        buf.write(this->src_off);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_src = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__7<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__7<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__7<FMGL(T) >(that_len, that_dst, that_src, that_src_off, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__7(x10_int len, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10aux::ref<x10::lang::ValRail<FMGL(T) > > src, x10_int src_off, x10_int dst_off) : len(len), dst(dst), src(src), src_off(src_off), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:216-221";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__7<FMGL(T) > >x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__7<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__7_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__6_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__6_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__6 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__6<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 213 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> pair =
          (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(src_finder))).operator->()))->*(x10aux::findITable<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > >(((x10aux::ref<x10::lang::Reference>)src_finder)->_getITables())->apply))();
        
        //#line 214 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > src = pair->FMGL(first);
        
        //#line 215 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10_int src_off = pair->FMGL(second);
        
        //#line 216 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        x10::lang::Runtime::runAt(x10::lang::Place_methods::place(x10aux::get_location(dst)),
                                  x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__7<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__7<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__7<FMGL(T)>(len, dst, src, src_off, dst_off)))));
    }
    
    // captured environment
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > src_finder;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10_int len;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->src_finder);
        buf.write(this->dst);
        buf.write(this->len);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > that_src_finder = buf.read<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > >();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10_int that_len = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__6<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__6<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__6<FMGL(T) >(that_src_finder, that_dst, that_len, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__6(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > src_finder, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10_int len, x10_int dst_off) : src_finder(src_finder), dst(dst), len(len), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:212-222";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__6<FMGL(T) > >x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__6<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__6_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__5_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__5_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__5 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__5<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 196 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 196 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i = ((x10_int)0); ((i) < (len)); 
                                                  //#line 196 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                  i = ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 197 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
    }
    
    // captured environment
    x10_int len;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->len);
        buf.write(this->dst);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__5<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__5<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__5<FMGL(T) >(that_len, that_dst, that_to_serialize, that_src_off, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__5(x10_int len, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off, x10_int dst_off) : len(len), dst(dst), to_serialize(to_serialize), src_off(src_off), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:194-199";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__5<FMGL(T) > >x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__5<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__5_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__4_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__4_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__4 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__4<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 190 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> pair =
          (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(src_finder))).operator->()))->*(x10aux::findITable<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(((x10aux::ref<x10::lang::Reference>)src_finder)->_getITables())->apply))();
        
        //#line 191 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > src = pair->FMGL(first);
        
        //#line 192 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10_int src_off = pair->FMGL(second);
        
        //#line 193 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize = x10::lang::ValRail<FMGL(T) >::make(src);
        
        //#line 194 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        x10::lang::Runtime::runAt(x10::lang::Place_methods::place(x10aux::get_location(dst)),
                                  x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__5<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__5<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__5<FMGL(T)>(len, dst, to_serialize, src_off, dst_off)))));
    }
    
    // captured environment
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > src_finder;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10_int len;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->src_finder);
        buf.write(this->dst);
        buf.write(this->len);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > that_src_finder = buf.read<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > >();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10_int that_len = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__4<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__4<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__4<FMGL(T) >(that_src_finder, that_dst, that_len, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__4(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > src_finder, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10_int len, x10_int dst_off) : src_finder(src_finder), dst(dst), len(len), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:189-200";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__4<FMGL(T) > >x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__4<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__4_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__3_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__3_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__3 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__3<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 172 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> pair =
          (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(dst_finder))).operator->()))->*(x10aux::findITable<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(((x10aux::ref<x10::lang::Reference>)dst_finder)->_getITables())->apply))();
        
        //#line 173 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > dst = pair->FMGL(first);
        
        //#line 174 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10_int dst_off = pair->FMGL(second);
        
        //#line 176 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 176 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i = ((x10_int)0); ((i) < (len)); 
                                                  //#line 176 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                  i = ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 177 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
    }
    
    // captured environment
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder;
    x10_int len;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->dst_finder);
        buf.write(this->len);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > that_dst_finder = buf.read<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > >();
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__3<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__3<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__3<FMGL(T) >(that_dst_finder, that_len, that_to_serialize, that_src_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__3(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder, x10_int len, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off) : dst_finder(dst_finder), len(len), to_serialize(to_serialize), src_off(src_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:171-179";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__3<FMGL(T) > >x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__3<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__3_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__2_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__2_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__2 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__2<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 118 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
        if (x10::lang::Rail__NativeRep::isJava()) {
            
            //#line 118 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            printf("Should never occur, see Rail.x10");
        } else {
            
            //#line 120 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
            {
                x10_int i;
                for (
                     //#line 120 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                     i = ((x10_int)0); ((i) < (len)); 
                                                      //#line 120 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                      i = ((x10_int) ((i) + (((x10_int)1)))))
                {
                    
                    //#line 121 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                    (dst)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
                }
            }
            
        }
        
    }
    
    // captured environment
    x10_int len;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->len);
        buf.write(this->dst);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__2<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__2<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__2<FMGL(T) >(that_len, that_dst, that_to_serialize, that_src_off, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__2(x10_int len, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off, x10_int dst_off) : len(len), dst(dst), to_serialize(to_serialize), src_off(src_off), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:117-123";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__2<FMGL(T) > >x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__2<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__2_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__1_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__1_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__1 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__1<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 116 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize = x10::lang::ValRail<FMGL(T) >::make(src);
        
        //#line 117 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        x10::lang::Runtime::runAt(x10::lang::Place_methods::place(x10aux::get_location(dst)),
                                  x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__2<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__2<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__2<FMGL(T)>(len, dst, to_serialize, src_off, dst_off)))));
    }
    
    // captured environment
    x10aux::ref<x10::lang::Rail<FMGL(T) > > src;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10_int len;
    x10_int src_off;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->src);
        buf.write(this->dst);
        buf.write(this->len);
        buf.write(this->src_off);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_src = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10_int that_len = buf.read<x10_int>();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__1<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__1<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__1<FMGL(T) >(that_src, that_dst, that_len, that_src_off, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__1(x10aux::ref<x10::lang::Rail<FMGL(T) > > src, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10_int len, x10_int src_off, x10_int dst_off) : src(src), dst(dst), len(len), src_off(src_off), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:115-124";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__1<FMGL(T) > >x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__1<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__1_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP__CLOSURE__0_CLOSURE
#define X10_LANG_RAIL__NATIVEREP__CLOSURE__0_CLOSURE
#include <x10/lang/Closure.h>
#include <x10/lang/VoidFun_0_0.h>
template<class FMGL(T)> class x10_lang_Rail__NativeRep__closure__0 : public x10::lang::Closure {
    public:
    
    static typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__0<FMGL(T) > > _itable;
    static x10aux::itable_entry _itables[2];
    
    virtual x10aux::itable_entry* _getITables() { return _itables; }
    
    // closure body
    void apply() {
        
        //#line 90 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
        if (x10::lang::Rail__NativeRep::isJava()) {
            
            //#line 90 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            printf("Should never occur, see ValRail.x10");
        } else {
            
            //#line 92 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
            {
                x10_int i;
                for (
                     //#line 92 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                     i = ((x10_int)0); ((i) < (len)); 
                                                      //#line 92 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                                                      i = ((x10_int) ((i) + (((x10_int)1)))))
                {
                    
                    //#line 93 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                    (dst)->set((to_serialize)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
                }
            }
            
        }
        
    }
    
    // captured environment
    x10_int len;
    x10aux::ref<x10::lang::Rail<FMGL(T) > > dst;
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize;
    x10_int src_off;
    x10_int dst_off;
    
    x10aux::serialization_id_t _get_serialization_id() {
        return _serialization_id;
    }
    
    // TODO: handle serialization of ref fields correctly
    
    void _serialize_body(x10aux::serialization_buffer &buf) {
        buf.write(this->len);
        buf.write(this->dst);
        buf.write(this->to_serialize);
        buf.write(this->src_off);
        buf.write(this->dst_off);
    }
    
    template<class __T> static x10aux::ref<__T> _deserialize(x10aux::deserialization_buffer &buf) {
        x10_int that_len = buf.read<x10_int>();
        x10aux::ref<x10::lang::Rail<FMGL(T) > > that_dst = buf.read<x10aux::ref<x10::lang::Rail<FMGL(T) > > >();
        x10aux::ref<x10::lang::ValRail<FMGL(T) > > that_to_serialize = buf.read<x10aux::ref<x10::lang::ValRail<FMGL(T) > > >();
        x10_int that_src_off = buf.read<x10_int>();
        x10_int that_dst_off = buf.read<x10_int>();
        x10aux::ref<x10_lang_Rail__NativeRep__closure__0<FMGL(T) > > this_ = new (x10aux::alloc<x10_lang_Rail__NativeRep__closure__0<FMGL(T) > >()) x10_lang_Rail__NativeRep__closure__0<FMGL(T) >(that_len, that_dst, that_to_serialize, that_src_off, that_dst_off);
        buf.record_reference(this_); // TODO: avoid; closure
        return this_;
    }
    
    x10_lang_Rail__NativeRep__closure__0(x10_int len, x10aux::ref<x10::lang::Rail<FMGL(T) > > dst, x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize, x10_int src_off, x10_int dst_off) : len(len), dst(dst), to_serialize(to_serialize), src_off(src_off), dst_off(dst_off) { }
    
    static const x10aux::serialization_id_t _serialization_id;
    
    static const x10aux::RuntimeType* getRTT() { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    virtual const x10aux::RuntimeType *_type() const { return x10aux::getRTT<x10::lang::VoidFun_0_0>(); }
    
    x10aux::ref<x10::lang::String> toString() {
        return x10::lang::String::Lit(this->toNativeString());
    }
    
    const char* toNativeString() {
        return "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10:89-95";
    }

};

template<class FMGL(T)> typename x10::lang::VoidFun_0_0::template itable <x10_lang_Rail__NativeRep__closure__0<FMGL(T) > >x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::_itable(&x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::apply, &x10::lang::Reference::at, &x10::lang::Reference::at, &x10::lang::Reference::equals, &x10::lang::Closure::hashCode, &x10::lang::Reference::home, &x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::toString, &x10::lang::Closure::typeName);template<class FMGL(T)>
x10aux::itable_entry x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::_itables[2] = {x10aux::itable_entry(&x10aux::getRTT<x10::lang::VoidFun_0_0>, &x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::_itable),x10aux::itable_entry(NULL, NULL)};

template<class FMGL(T)>
const x10aux::serialization_id_t x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::_serialization_id = 
    x10aux::DeserializationDispatcher::addDeserializer(x10_lang_Rail__NativeRep__closure__0<FMGL(T) >::template _deserialize<x10::lang::Object>);

#endif // X10_LANG_RAIL__NATIVEREP__CLOSURE__0_CLOSURE
#ifndef X10_LANG_RAIL__NATIVEREP_H_GENERICS
#define X10_LANG_RAIL__NATIVEREP_H_GENERICS
#ifndef X10_LANG_RAIL__NATIVEREP_H_localCopyTo_859
#define X10_LANG_RAIL__NATIVEREP_H_localCopyTo_859
template<class FMGL(T)> void x10::lang::Rail__NativeRep::localCopyTo(x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
                                                                     x10_int src_off,
                                                                     x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
                                                                     x10_int dst_off,
                                                                     x10_int len) {
    
    //#line 79 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
    {
        x10_int i;
        for (
             //#line 79 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
             i = ((x10_int)0); ((i) < (len));
             
             //#line 79 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
             i =
               ((x10_int) ((i) + (((x10_int)1)))))
        {
            
            //#line 80 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            (dst)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
        }
    }
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_localCopyTo_859
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_860
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_860
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10_int len) {
    
    //#line 85 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if ((x10aux::struct_equals(x10::lang::Place_methods::place((dst)->location),
                               x10::lang::Place_methods::_make(x10aux::here))) &&
        x10::lang::Rail__NativeRep::isJava())
    {
        
        //#line 85 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        printf("Should never occur, see Rail.x10");
        
        //#line 85 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 86 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          x10::lang::Place_methods::place((dst)->location)))
    {
        
        //#line 86 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (src)->copyTo(src_off,dst,dst_off,len);
        
        //#line 86 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 88 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize =
      x10::lang::ValRail<FMGL(T) >::make(src);
    
    //#line 89 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Runtime::runAt(x10::lang::Place_methods::place(x10aux::get_location(dst)),
                              x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__0<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__0<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__0<FMGL(T)>(len, dst, to_serialize, src_off, dst_off)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_860
#ifndef X10_LANG_RAIL__NATIVEREP_H_localCopyFrom_861
#define X10_LANG_RAIL__NATIVEREP_H_localCopyFrom_861
template<class FMGL(T)> void x10::lang::Rail__NativeRep::localCopyFrom(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10_int len) {
    
    //#line 102 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
    {
        x10_int i;
        for (
             //#line 102 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
             i = ((x10_int)0); ((i) < (len));
             
             //#line 102 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
             i =
               ((x10_int) ((i) + (((x10_int)1)))))
        {
            
            //#line 103 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            (dst)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
        }
    }
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_localCopyFrom_861
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyFrom_862
#define X10_LANG_RAIL__NATIVEREP_H_copyFrom_862
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyFrom(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10_int len) {
    
    //#line 110 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if ((x10aux::struct_equals(x10::lang::Place_methods::place((src)->location),
                               x10::lang::Place_methods::_make(x10aux::here))) &&
        x10::lang::Rail__NativeRep::isJava())
    {
        
        //#line 110 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        printf("Should never occur, see Rail.x10");
        
        //#line 110 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 111 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          x10::lang::Place_methods::place((src)->location)))
    {
        
        //#line 111 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (dst)->copyFrom(dst_off,src,src_off,len);
        
        //#line 111 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 115 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Runtime::runAt(x10::lang::Place_methods::place(x10aux::get_location(src)),
                              x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__1<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__1<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__1<FMGL(T)>(src, dst, len, src_off, dst_off)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyFrom_862
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyFrom_863
#define X10_LANG_RAIL__NATIVEREP_H_copyFrom_863
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyFrom(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10aux::ref<x10::lang::ValRail<FMGL(T) > > src,
  x10_int src_off,
  x10_int len) {
    
    //#line 130 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::isJava())
    {
        
        //#line 130 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        printf("Should never occur, see Rail.x10");
        
        //#line 130 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 131 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          x10::lang::Place_methods::place((src)->location)))
    {
        
        //#line 131 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (dst)->copyFrom(dst_off,src,src_off,len);
        
        //#line 131 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 136 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
    {
        x10_int i;
        for (
             //#line 136 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
             i = ((x10_int)0); ((i) < (len));
             
             //#line 136 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
             i =
               ((x10_int) ((i) + (((x10_int)1)))))
        {
            
            //#line 137 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            (dst)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
        }
    }
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyFrom_863
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_864
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_864
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10::lang::Place dst_place,
  x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder,
  x10_int len) {
    
    //#line 166 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          dst_place)) {
        
        //#line 166 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (src)->copyTo(src_off,dst_place,dst_finder,len);
        
        //#line 166 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 170 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize =
      x10::lang::ValRail<FMGL(T) >::make(src);
    
    //#line 171 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Runtime::runAt(dst_place, x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__3<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__3<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__3<FMGL(T)>(dst_finder, len, to_serialize, src_off)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_864
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyFrom_865
#define X10_LANG_RAIL__NATIVEREP_H_copyFrom_865
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyFrom(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10::lang::Place src_place,
  x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > src_finder,
  x10_int len) {
    
    //#line 185 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          src_place)) {
        
        //#line 185 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (dst)->copyFrom(dst_off,src_place,src_finder,len);
        
        //#line 185 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 189 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Runtime::runAt(src_place, x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__4<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__4<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__4<FMGL(T)>(src_finder, dst, len, dst_off)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyFrom_865
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyFrom1_866
#define X10_LANG_RAIL__NATIVEREP_H_copyFrom1_866
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyFrom1(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10::lang::Place src_place,
  x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::ValRail<FMGL(T) > >, x10_int> > > src_finder,
  x10_int len) {
    
    //#line 207 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          src_place)) {
        
        //#line 207 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (dst)->copyFrom(dst_off,src_place,src_finder,len);
        
        //#line 207 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 212 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Runtime::runAt(src_place, x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__6<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__6<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__6<FMGL(T)>(src_finder, dst, len, dst_off)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyFrom1_866
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_867
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_867
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10aux::ref<x10::lang::Rail<FMGL(T) > > dst,
  x10_int dst_off,
  x10_int len,
  x10aux::ref<x10::lang::VoidFun_0_0> notifier) {
    
    //#line 239 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          x10::lang::Place_methods::place((dst)->location)))
    {
        
        //#line 239 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (src)->copyTo(src_off,dst,dst_off,len,notifier);
        
        //#line 239 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 240 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if ((x10aux::struct_equals(x10::lang::Place_methods::place((dst)->location),
                               x10::lang::Place_methods::_make(x10aux::here))))
    {
        
        //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > dst2 =
          (__extension__ ({
            x10aux::ref<x10::lang::Rail<FMGL(T) > > __desugarer__var__44__ =
              dst;
            
            //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
            x10aux::ref<x10::lang::Rail<FMGL(T) > > __var868__;
            
            //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Labeled_c
            goto __ret1978; __ret1978: 
            //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Do_c
            do
            {
            {
                
                //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
                if ((!x10aux::struct_equals(__desugarer__var__44__,
                                            x10aux::null)) &&
                    !((x10aux::struct_equals(x10::lang::Place_methods::place((__desugarer__var__44__)->location),
                                             x10::lang::Place_methods::_make(x10aux::here)))))
                {
                    
                    //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Throw_c
                    x10aux::throwException(x10aux::nullCheck(x10::lang::ClassCastException::_make(x10::lang::String::Lit("x10.lang.Rail[T]{self.home==here}"))));
                }
                
                //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                __var868__ =
                  __desugarer__var__44__;
                
                //#line 241 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Branch_c
                goto __ret1978_end_;
            }
            goto __ret1978_next_; __ret1978_next_: ;
            }
            while (false);
            goto __ret1978_end_; __ret1978_end_: ;
            __var868__;
        }))
        ;
        
        //#line 242 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 242 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i =
                   ((x10_int)0);
                 ((i) < (len));
                 
                 //#line 242 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                 i =
                   ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 243 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst2)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
        //#line 245 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(notifier))).operator->()))->*(x10aux::findITable<x10::lang::VoidFun_0_0>(((x10aux::ref<x10::lang::Reference>)notifier)->_getITables())->apply))();
        
        //#line 246 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 251 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize =
      x10::lang::ValRail<FMGL(T) >::make(src);
    
    //#line 252 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10aux::run_at(x10::lang::Place_methods::place((dst)->location)->
                     FMGL(id), x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__8<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__8<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__8<FMGL(T)>(dst, len, to_serialize, src_off, dst_off, notifier)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_867
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_870
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_870
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10::lang::Place dst_place,
  x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > dst_finder,
  x10_int len,
  x10aux::ref<x10::lang::VoidFun_0_0> notifier) {
    
    //#line 271 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if (x10::lang::Rail__NativeRep::useNativeFor(
          dst_place)) {
        
        //#line 271 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (src)->copyTo(src_off,dst_place,dst_finder,len,notifier);
        
        //#line 271 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 272 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
    if ((x10aux::struct_equals(dst_place,
                               x10::lang::Place_methods::_make(x10aux::here))))
    {
        
        //#line 273 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> pair =
          (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(dst_finder))).operator->()))->*(x10aux::findITable<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(((x10aux::ref<x10::lang::Reference>)dst_finder)->_getITables())->apply))();
        
        //#line 274 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > dst =
          pair->
            FMGL(first);
        
        //#line 275 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10_int dst_off =
          pair->
            FMGL(second);
        
        //#line 276 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.For_c
        {
            x10_int i;
            for (
                 //#line 276 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
                 i =
                   ((x10_int)0);
                 ((i) < (len));
                 
                 //#line 276 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                 i =
                   ((x10_int) ((i) + (((x10_int)1)))))
            {
                
                //#line 277 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                (dst)->set((src)->apply(((x10_int) ((src_off) + (i)))), ((x10_int) ((dst_off) + (i))));
            }
        }
        
        //#line 279 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        (((x10::lang::Reference*)(((x10aux::ref<x10::lang::Reference>)x10aux::placeCheck(x10aux::nullCheck(notifier))).operator->()))->*(x10aux::findITable<x10::lang::VoidFun_0_0>(((x10aux::ref<x10::lang::Reference>)notifier)->_getITables())->apply))();
        
        //#line 280 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
        return;
    }
    
    //#line 285 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::ValRail<FMGL(T) > > to_serialize =
      x10::lang::ValRail<FMGL(T) >::make(src);
    
    //#line 286 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10aux::run_at(dst_place->FMGL(id), x10aux::class_cast_unchecked<x10aux::ref<x10::lang::VoidFun_0_0> >(x10aux::ref<x10::lang::VoidFun_0_0>(x10aux::ref<x10_lang_Rail__NativeRep__closure__9<FMGL(T) > >(new (x10aux::alloc<x10::lang::VoidFun_0_0>(sizeof(x10_lang_Rail__NativeRep__closure__9<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__9<FMGL(T)>(dst_finder, len, to_serialize, src_off, notifier)))));
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_870
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_871
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_871
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10::lang::Place dst_place,
  x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle,
  x10_int dst_off,
  x10_int len) {
    
    //#line 316 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > finder =
      x10aux::class_cast_unchecked<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > >(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(x10aux::ref<x10_lang_Rail__NativeRep__closure__10<FMGL(T) > >(new (x10aux::alloc<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(sizeof(x10_lang_Rail__NativeRep__closure__10<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__10<FMGL(T)>(dst_handle, dst_off))));
    
    //#line 317 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Rail__NativeRep::copyTo(src,src_off,dst_place,finder,len);
    
    //#line 318 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10aux::dealloc(finder.operator->());
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_871
#ifndef X10_LANG_RAIL__NATIVEREP_H_copyTo_872
#define X10_LANG_RAIL__NATIVEREP_H_copyTo_872
template<class FMGL(T)> void x10::lang::Rail__NativeRep::copyTo(
  x10aux::ref<x10::lang::Rail<FMGL(T) > > src,
  x10_int src_off,
  x10::lang::Place dst,
  x10::lang::PlaceLocalHandle<x10aux::ref<x10::lang::Rail<FMGL(T) > > > dst_handle,
  x10_int dst_off,
  x10_int len,
  x10aux::ref<x10::lang::VoidFun_0_0> notifier) {
    
    //#line 324 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > finder =
      x10aux::class_cast_unchecked<x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > > >(x10aux::ref<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(x10aux::ref<x10_lang_Rail__NativeRep__closure__11<FMGL(T) > >(new (x10aux::alloc<x10::lang::Fun_0_0<x10::util::Pair<x10aux::ref<x10::lang::Rail<FMGL(T) > >, x10_int> > >(sizeof(x10_lang_Rail__NativeRep__closure__11<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__11<FMGL(T)>(dst_handle, dst_off))));
    
    //#line 325 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10::lang::Rail__NativeRep::copyTo(src,src_off,dst,finder,len,notifier);
    
    //#line 326 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10aux::dealloc(finder.operator->());
    
    //#line 327 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
    x10aux::dealloc(notifier.operator->());
}
#endif // X10_LANG_RAIL__NATIVEREP_H_copyTo_872
#ifndef X10_LANG_RAIL__NATIVEREP_H_cudaMakeRail_873
#define X10_LANG_RAIL__NATIVEREP_H_cudaMakeRail_873
template<class FMGL(T)> x10aux::ref<x10::lang::Rail<FMGL(T) > >
  x10::lang::Rail__NativeRep::cudaMakeRail(
  x10::lang::Place dst,
  x10_int length) {
    
    //#line 332 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
    return x10aux::class_cast_unchecked<x10aux::ref<x10::lang::Rail<FMGL(T) > > >(x10aux::null);
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_cudaMakeRail_873
#ifndef X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_874
#define X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_874
template<class FMGL(T)> x10aux::ref<x10::lang::Rail<FMGL(T) > >
  x10::lang::Rail__NativeRep::makeRemoteRail(
  x10::lang::Place p,
  x10_int length,
  x10aux::ref<x10::lang::Fun_0_1<x10_int, FMGL(T)> > init) {
    
    //#line 337 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::Rail<FMGL(T) > > tmp =
      x10::lang::Rail<void>::make<FMGL(T) >(length, init);
    
    //#line 338 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
    return x10::lang::Rail__NativeRep::template makeRemoteRail<FMGL(T) >(
             p,
             length,
             tmp);
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_874
#ifndef X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_875
#define X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_875
template<class FMGL(T)> x10aux::ref<x10::lang::Rail<FMGL(T) > >
  x10::lang::Rail__NativeRep::makeRemoteRail(
  x10::lang::Place p,
  x10_int length,
  x10aux::ref<x10::lang::Rail<FMGL(T) > > init) {
    
    //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
    x10aux::ref<x10::lang::Rail<FMGL(T) > > r =
      (__extension__ ({
        x10aux::ref<x10::lang::Rail<FMGL(T) > > __desugarer__var__46__ =
          x10::lang::Place_methods::isCUDA(p)
          ? (x10aux::ref<x10::lang::Rail<FMGL(T) > >)(x10::lang::Rail<void>::makeCUDA<FMGL(T) >(p,length))
          : (x10aux::ref<x10::lang::Rail<FMGL(T) > >)(x10::lang::Runtime::template evalAt<x10aux::ref<x10::lang::Rail<FMGL(T) > > >(
                                                        p,
                                                        x10aux::class_cast_unchecked<x10aux::ref<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > > >(x10aux::ref<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >(x10aux::ref<x10_lang_Rail__NativeRep__closure__12<FMGL(T) > >(new (x10aux::alloc<x10::lang::Fun_0_0<x10aux::ref<x10::lang::Rail<FMGL(T) > > > >(sizeof(x10_lang_Rail__NativeRep__closure__12<FMGL(T)>)))x10_lang_Rail__NativeRep__closure__12<FMGL(T)>(length))))));
        
        //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10LocalDecl_c
        x10aux::ref<x10::lang::Rail<FMGL(T) > > __var876__;
        
        //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Labeled_c
        goto __ret1980; __ret1980: 
        //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Do_c
        do
        {
        {
            
            //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10If_c
            if ((!x10aux::struct_equals(__desugarer__var__46__,
                                        x10aux::null)) &&
                !((x10aux::struct_equals(x10aux::nullCheck(__desugarer__var__46__)->
                                           FMGL(length),
                                         length))))
            {
                
                //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Throw_c
                x10aux::throwException(x10aux::nullCheck(x10::lang::ClassCastException::_make(x10::lang::String::Lit("x10.lang.Rail[T]{self.length==length}"))));
            }
            
            //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            __var876__ =
              __desugarer__var__46__;
            
            //#line 345 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Branch_c
            goto __ret1980_end_;
        }
        goto __ret1980_next_; __ret1980_next_: ;
        }
        while (false);
        goto __ret1980_end_; __ret1980_end_: ;
        __var876__;
    }))
    ;
    
    //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Try_c
    try {
    try {
        
        //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        x10::lang::Runtime::startFinish();
        {
            
            //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            x10::lang::Rail__NativeRep::copyTo(init,((x10_int)0),r,((x10_int)0),length);
        }
    }
    catch (x10aux::__ref& __ref__877) {
        x10aux::ref<x10::lang::Throwable>& __exc__ref__877 = (x10aux::ref<x10::lang::Throwable>&)__ref__877;
        if (x10aux::instanceof<x10aux::ref<x10::lang::Throwable> >(__exc__ref__877)) {
            x10aux::ref<x10::lang::Throwable> __desugarer__var__47__ =
              static_cast<x10aux::ref<x10::lang::Throwable> >(__exc__ref__877);
            {
                
                //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
                x10::lang::Runtime::pushException(
                  __desugarer__var__47__);
            }
        } else
        throw;
    }
    } catch (...) {
        {
            
            //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
            x10::lang::Runtime::stopFinish();
        }
        throw;
    }
    {
        
        //#line 346 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": polyglot.ast.Eval_c
        x10::lang::Runtime::stopFinish();
    }
    
    //#line 347 "/home/tux/workspace/x10.runtime/src-x10/x10/lang/Rail__NativeRep.x10": x10.ast.X10Return_c
    return r;
    
}
#endif // X10_LANG_RAIL__NATIVEREP_H_makeRemoteRail_875
template<class __T> x10aux::ref<__T> x10::lang::Rail__NativeRep::_deserializer(x10aux::deserialization_buffer& buf) {
    x10aux::ref<x10::lang::Rail__NativeRep> this_ = new (x10aux::alloc_remote<x10::lang::Rail__NativeRep>()) x10::lang::Rail__NativeRep();
    buf.record_reference(this_);
    this_->_deserialize_body(buf);
    return this_;
}

#endif // X10_LANG_RAIL__NATIVEREP_H_GENERICS
#endif // __X10_LANG_RAIL__NATIVEREP_H_NODEPS
